---
import Layout from "../../components/Layout.astro";
import { LinearSearchVisualizer } from "../../components/visualizer";

const title = "線形探索 (Linear Search)";
const description =
	"配列の先頭から順番に目標値を探すシンプルなアルゴリズムを視覚的に学べます。";
---

<Layout title={title} description={description}>
  <div class="container mx-auto px-4 py-8 max-w-5xl">
    <!-- Introduction -->
    <section id="introduction" class="mb-12">
      <h1 class="text-4xl font-bold text-neutral-800 mb-4">{title}</h1>
      <p class="text-xl text-neutral-600 mb-8">
        配列の先頭から順番に目標値を探すシンプルなアルゴリズム
      </p>

      <!-- 概要と流れを統合 -->
      <div class="grid md:grid-cols-2 gap-6">
        <!-- 左: 概要 -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-blue-800 mb-4">概要</h2>
          <ul class="space-y-3 text-blue-700">
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">▸</span>
              <span><strong>目的</strong>: 配列から目標値を見つける</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">▸</span>
              <span><strong>入力</strong>: 配列と目標値</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">▸</span>
              <span><strong>出力</strong>: 見つかった位置 or「見つからない」</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">▸</span>
              <span><strong>適用</strong>: 小さな配列、未ソートデータ</span>
            </li>
          </ul>
        </div>

        <!-- 右: 流れ -->
        <div class="bg-neutral-50 border border-neutral-200 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-neutral-800 mb-4">アルゴリズムの流れ</h2>
          <ol class="space-y-3 text-neutral-600">
            <li class="flex items-start gap-3">
              <span class="flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
              <span>配列の先頭（index 0）から開始</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
              <span>現在の要素と目標値を比較</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
              <span>一致しなければ次の要素へ移動</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">4</span>
              <span>発見 or 末尾到達で終了</span>
            </li>
          </ol>
        </div>
      </div>
    </section>

    <!-- Visualization -->
    <section id="visualization" class="mb-12">
      <h2 class="text-2xl font-bold text-neutral-800 mb-6">ステップバイステップで理解する</h2>
      <LinearSearchVisualizer client:load />
    </section>

    <!-- Code -->
    <section id="code" class="mb-12">
      <h2 class="text-2xl font-bold text-neutral-800 mb-6">コード</h2>

      <div class="bg-neutral-900 rounded-lg p-6 overflow-x-auto">
        <pre class="text-sm text-neutral-100"><code class="language-typescript"><span class="text-purple-400">function</span> <span class="text-yellow-300">linearSearch</span>(<span class="text-orange-300">array</span>: <span class="text-blue-300">number[]</span>, <span class="text-orange-300">target</span>: <span class="text-blue-300">number</span>): <span class="text-blue-300">number</span> {'{'}
  <span class="text-purple-400">for</span> (<span class="text-purple-400">let</span> <span class="text-orange-300">i</span> = <span class="text-green-300">0</span>; <span class="text-orange-300">i</span> {'<'} <span class="text-orange-300">array</span>.<span class="text-blue-300">length</span>; <span class="text-orange-300">i</span>++) {'{'}
    <span class="text-purple-400">if</span> (<span class="text-orange-300">array</span>[<span class="text-orange-300">i</span>] === <span class="text-orange-300">target</span>) {'{'}
      <span class="text-purple-400">return</span> <span class="text-orange-300">i</span>;  <span class="text-neutral-500">// 発見: インデックスを返す</span>
    {'}'}
  {'}'}
  <span class="text-purple-400">return</span> -<span class="text-green-300">1</span>;  <span class="text-neutral-500">// 見つからない場合</span>
{'}'}</code></pre>
      </div>
    </section>

    <!-- Complexity -->
    <section id="complexity" class="mb-12">
      <h2 class="text-2xl font-bold text-neutral-800 mb-6">計算量と特性</h2>

      <div class="bg-neutral-50 border border-neutral-200 rounded-lg p-6 space-y-6">
          <div>
            <h3 class="font-semibold text-neutral-800 mb-3">時間計算量</h3>
            <ul class="space-y-2 text-neutral-600">
              <li>• <strong>最良ケース</strong>: O(1) — 目標値が配列の先頭にある場合</li>
              <li>• <strong>最悪ケース</strong>: O(n) — 目標値が配列の末尾または存在しない場合</li>
              <li>• <strong>平均ケース</strong>: O(n/2) ≈ O(n)</li>
            </ul>
            <div class="mt-4 p-4 bg-white rounded-lg border border-neutral-200">
              <p class="text-sm text-neutral-600">
                <strong>なぜ O(n) なのか？</strong><br/>
                最悪の場合、配列の全要素 n 個をチェックする必要があるため、
                実行時間は配列のサイズに比例して増加します。
              </p>
            </div>
          </div>

          <div>
            <h3 class="font-semibold text-neutral-800 mb-3">空間計算量</h3>
            <p class="text-neutral-600">O(1) — 追加のメモリは不要（インデックス変数のみ使用）</p>
          </div>

          <div>
            <h3 class="font-semibold text-neutral-800 mb-3">特徴</h3>
            <ul class="space-y-2 text-neutral-600">
              <li class="flex items-start gap-2">
                <span class="text-green-600">✓</span>
                <span><strong>ソート不要</strong>: 配列がソートされていなくても動作する</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-600">✓</span>
                <span><strong>シンプル</strong>: 実装が簡単で理解しやすい</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-600">✓</span>
                <span><strong>小規模に最適</strong>: 小さな配列では効率的</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-red-500">✗</span>
                <span><strong>大規模に非効率</strong>: 大きな配列では二分探索より遅い</span>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="font-semibold text-neutral-800 mb-3">比較: 線形探索 vs 二分探索</h3>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="border-b border-neutral-300">
                    <th class="text-left p-2 text-neutral-700">項目</th>
                    <th class="text-left p-2 text-neutral-700">線形探索</th>
                    <th class="text-left p-2 text-neutral-700">二分探索</th>
                  </tr>
                </thead>
                <tbody class="text-neutral-600">
                  <tr class="border-b border-neutral-200">
                    <td class="p-2">時間計算量</td>
                    <td class="p-2 font-mono">O(n)</td>
                    <td class="p-2 font-mono">O(log n)</td>
                  </tr>
                  <tr class="border-b border-neutral-200">
                    <td class="p-2">ソート必要性</td>
                    <td class="p-2">不要</td>
                    <td class="p-2">必要</td>
                  </tr>
                  <tr class="border-b border-neutral-200">
                    <td class="p-2">実装難易度</td>
                    <td class="p-2">簡単</td>
                    <td class="p-2">やや複雑</td>
                  </tr>
                  <tr>
                    <td class="p-2">100万要素での比較回数</td>
                    <td class="p-2 font-mono">最大 1,000,000 回</td>
                    <td class="p-2 font-mono">最大 20 回</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div>
            <h3 class="font-semibold text-neutral-800 mb-3">使用シーン</h3>
            <ul class="space-y-1 text-neutral-600">
              <li>• 配列のサイズが小さい場合（〜100要素程度）</li>
              <li>• 配列がソートされていない場合</li>
              <li>• 一度だけ検索する場合（ソートのコストが見合わない）</li>
              <li>• リンクリストなど、ランダムアクセスができないデータ構造</li>
            </ul>
          </div>
      </div>
    </section>
  </div>
</Layout>
