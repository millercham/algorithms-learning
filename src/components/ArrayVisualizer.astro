---
interface Props {
	array: number[];
	target: number;
}

const { array, target } = Astro.props;
---

<div class="array-visualizer">
  <!-- 目標値表示 -->
  <div class="flex items-center justify-between p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 mb-8">
    <div>
      <p class="text-neutral-600 text-sm mb-1">探索対象</p>
      <p class="text-3xl text-blue-600">目標値: <span id="target-value">{target}</span></p>
    </div>
    <button
      id="btn-randomize"
      class="px-6 py-3 bg-white hover:bg-neutral-50 border-2 border-blue-300 rounded-lg transition-all hover:shadow-md flex items-center gap-2"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22"></path>
        <path d="m18 2 4 4-4 4"></path>
        <path d="M2 6h1.9c1.5 0 2.9.9 3.6 2.2"></path>
        <path d="M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8"></path>
        <path d="m18 14 4 4-4 4"></path>
      </svg>
      新しい配列を生成
    </button>
  </div>

  <!-- 配列表示 -->
  <div class="p-10 bg-gradient-to-br from-white to-neutral-50 rounded-xl border-2 border-neutral-200 shadow-sm">
    <div id="array-container" class="flex flex-wrap gap-4 justify-center items-end min-h-[240px]">
      {array.map((value, index) => (
        <div class="flex flex-col items-center gap-3">
          <div class="label-container h-6"></div>
          <div
            class="array-box w-20 h-20 flex items-center justify-center rounded-xl border-2 border-neutral-300 bg-neutral-100 text-neutral-600 shadow-md transition-all duration-300"
            data-index={index}
            data-value={value}
          >
            <span class="text-2xl">{value}</span>
          </div>
          <div class="flex flex-col items-center gap-1">
            <span class="text-xs text-neutral-400">index</span>
            <span class="text-sm text-neutral-600 font-mono bg-neutral-100 px-2 py-0.5 rounded">{index}</span>
          </div>
        </div>
      ))}
    </div>

    <!-- 凡例 -->
    <div class="mt-8 flex justify-center gap-6 text-sm">
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded bg-gradient-to-br from-yellow-400 to-amber-400 border-2 border-yellow-500"></div>
        <span class="text-neutral-600">現在チェック中</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded bg-neutral-200 border-2 border-neutral-300"></div>
        <span class="text-neutral-600">探索済み</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-400"></div>
        <span class="text-neutral-600">発見</span>
      </div>
    </div>
  </div>
</div>

